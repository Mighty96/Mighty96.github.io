---
title: "HTTP 완벽 가이드 1부 - HTTP: 웹의 기초"

categories:
  - Study
tags:
  - HTTP
toc: true
toc_sticky: true
---

[HTTP 완벽 가이드](http://aladin.kr/p/jboK0) 시리즈를 정리한 내용입니다.

# 1장 HTTP 개관

## 1.2 웹 클라이언트와 서버

- 웹 서버는 HTTP 프로토콜로 의사소통하기 때문에 보통 HTTP 서버라고 불린다.
- 클라이언트가 웹브라우저를 통해 HTTP요청을 서버로 보내면, 서버는 요청받은 객체를 찾고 HTTP응답에 실어서 클라이언트에게 보낸다.

## 1.3 리소스

- 텍스트파일, HTML파일, JPEG 이미지 파일 과 같은 정적 파일 뿐 아니라 요청에 따라 콘텐츠를 생산하는 프로그램(동적 콘텐츠 리소스) 까지 모두 리소스가 될 수 있다.

__1.3.1 미디어 타입__

> Content-type: image/jpeg  
>                 └MIME타입  

- HTTP는 웹에서 전송되는 객체 각각에 MIME 타입이라는 데이터 포맷 라벨을 붙인다.
- 웹 브라우저는 서버로부터 객체를 받았을 때 MIME타입을 통해 다룰 수 있는지 확인한다.
- MIME타입은 사선(/)으로 구분된 주 타입과 부 타입으로 이루어진 문자열 라벨이다.

> HTML : text/html  
> plain ASCII : text/plain  
> JPEG : image/jpeg  
> GIF : image/gif  

__1.3.2 URI__

- 서버 리소스 이름은 URI(uniform resource identifier, 통합 자원 식별자) 라고 불린다.
> `http://www.joes-hardware.com/specials/saw-blade.gif`  
- URL, URN으로 세분화할 수 있다.

__1.3.3 URL__

- 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.
> `http://www.joes-hardware.com/specials/saw-blade.gif`  
- 위 URL의 경우 스킴(http://)과 주소(www.joes-hardware.com), 리소스(/specials/saw-blade.gif)로 나눌 수 있다.
- 오늘날의 대부분의 URI는 URN이다.

__1.3.4 URN__

- 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 한다.
- 리소스의 위치가 변하더라도 영향을 받지 않는다.
- 아직 인프라의 부재로 인해 널리 채택되지 못했다.

## 1.4 트랜잭션

- HTTP 트랜잭션은 요청 명령과 응답 결과로 구성되어 있다.

__1.4.1 메서드__

- HTTP는 HTTP 메서드라고 불리는 여러가지 종류의 요청 명령을 지원하며, 요청 메세지는 한개의 메서드를 갖는다.

| HTTP 메서드 | 설명 |
| --- | --- |
| GET | 서버에서 클라이언트로 지정한 리소스를 보내라. |
| PUT | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라. |
| DELETE | 지정한 리소스를 서버에서 삭제하라. |
| POST | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라. |
| HEAD | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라. |

__1.4.2 상태코드__

- HTTP 응답 메세지는 상태 코드를 포함한다.
- 세자리 숫자와 사유 구절로 이루어진다.

## 1.5 메세지

- 요청 메세지 : 클라이언트 -> 서버

```
GET /test/hi-there.txt HTTP/1.0    시작줄
-------------------------------
Accept: text/*                     헤더
Accept-Language: en,fr
```

- 응답 메세지 : 서버 -> 클라이언트

```
HTTP/1.0 200 OK                    시작줄
------------------------------
Content-type: text/plain           헤더
Content-length: 19

------------------------------
Hi! I'm a message !                본문
```

- 시작줄 : 요청이라면 무엇을 해야하는지, 응답이라면 무슨 일이 일어났는지 표기
- 헤더 : 0개 이상의 헤더 필드로 구성. 각 헤더 필드는 :으로 구분되어 하나의 이름과 하나의 값으로 구성. 빈줄로 헤더가 끝났음을 표시.
- 본문 : 모든 종류의 데이터가 포함될 수 있다.

## 1.6 TCP 커넥션

__1.6.1 TCP/IP__

- HTTP는 애플리케이션 계층 프로토콜이므로 네트워크 통신의 핵심적인 세부사항에 대해서는 신경쓰지 않는다.
- TCP/IP는 다음 기능들을 통하여 이를 대신한다.
  - 오류 없는 데이터 전송
  - 순서에 맞는 전달 (데이터는 언제나 보낸 순서대로 도착)
  - 조각나지 않는 데이터 스트림 (언제든 어떤 크기로든 보낼 수 있음)
- TCP/IP : TCP와 IP가 층을 이루는, 패킷 교환 네트워크 프로토콜의 집합
- HTTP > TCP > IP 의 계층구조

__1.6.2 접속, IP 주소 그리고 포트번호__

- 클라이언트와 서버가 메세지를 주고받기 위해서는 IP주소와 포트번호를 사용해 TCP/IP 커넥션을 맺어야 한다.
- 통신 과정
  - a. 웹브라우저는 서버의 URL에서 호스트 명을 추출
  - b. 웹브라우저는 서버의 호스트 명을 IP로 변환(DNS)
  - c. 웹브라우저는 URL에서 포트번호를 추출(없을 시 http는 80, https는 443)
  - d. 웹브라우저는 웹 서버와 TCP 커넥션을 맺음(3-way handshake)
  - e. 웹브라우저는 서버에 HTTP 요청을 보냄
  - f. 서버는 웹브라우저에 HTTP 응답을 돌려줌
  - g. 커넥션이 닫히면, 웹브라우저는 문서를 보여줌

<br><br><br>

# 2장 URL과 리소스

## 2.2 URL 문법

- 대부분의 URL 문법은 일반적으로 9개 부분으로 나뉜다.
> <스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>  

| 컴포넌트 | 설명 | 기본값 |
| --- | --- | --- |
| 스킴 | 리소스를 가져오려면 어떤 프로토콜을 사용하여 서버에 접근해야 하는지 가리킴 | 없음 |
| 사용자 이름 | 몇몇 스킴은 리소스에 접근을 하기 위해 사용자 이름을 필요로 함 | anonymous |
| 비밀번호 | 사용자의 비밀번호를 가리키며, 사용자 이름에 콜론(:)으로 이어서 기술한다. | <이메일 주소> |
| 호스트 | 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소 | 없음 |
| 포트 | 리소스를 호스팅하는 서버가 열어놓은 포트번호. 많은 스킴이 기본 포트를 가지고 있다. | 스킴에 따라 다름 |
| 경로 | 이전 컴포넌트와 빗금(/)으로 구분되어 있으며, 서버 내 리소스가 서버 어디에 있는지를 가리킨다. 경로 컴포넌트의 문법은 서버와 스킴에 따라 다르다. | 없음 |
| 파라미터 | 특정 스킴들에서 입력 파라미터를 기술하는 용도로 사용한다. 파라미터는 이름/값을 쌍으로 가진다. 파라미터는, 다른 파라미터나 경로의 일부와 세미콜론(;)으로 구분하여 기술하며, 여러개를 가질 수 있다. | 없음 |
| 질의 | 스킴에서 애플리케이션에 파라미터를 전달하는데 쓰인다. 질의 컴포넌트를 작성하는데 쓰이는 공통 포맷은 없다. 이는 URL의 끝에 "?"로 구분한다. | 없음 |
| 프래그먼트 | 리소스의 조각이나 일부분을 가리키는 이름이다. URL이 특정 객체를 가리킬 경우에 프래그먼트 필드는 서버에 전달되지 안흔ㄴ다. 이는 클라이언트에서만 사용한다. URL의 끝에서 "#"문자로 구분한다. | 없음 |

__2.2.1 스킴 : 사용할 프로토콜__

- 주어진 리소스에 어떻게 접근할지 나타냄
- 알파벳으로 시작해야 하고 나머지 부분들과 첫번째 ":"로 구분하며 대소문자를 구분하지 않는다.

__2.2.2 호스트와 포트__

- 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디인지를 가리킨다.
- 호스트 컴포넌트는 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다.
  - 호스트 명이 될 수도 있고, IP주소가 될 수도 있다.
- 포트 컴포넌트는 서버가 열어놓은 네트워크 포트를 가리킨다.

__2.2.3 사용자 이름과 비밀번호__

- FTP 서버 등에서는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.

__2.2.4 경로__

- URL의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 표기한다.
- 유닉스 파일 시스템의 파일 경로와 유사하게 '/'문자를 기준으로 경로 조각으로 나뉜다.

__2.2.5 파라미터__

- 많은 프로토콜은 리소스에 접근하기 위해 사용자 이름과 비밀번호 뿐 아니라 더 많은 정보를 요구한다.
- 파라미터 컴포넌트는 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.
- 이름/값 쌍의 리스트들로 ';'문자로 구분하여 기술한다.

__2.2.6 질의 문자열__

- 데이터베이스 같은 서버들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있다.
> http://www.joes-hardware.com/inventory-check.cgi?item=12731&color=blue&size=large
- 위 질의는 제푸번호가 12731이고, 큰 치수에, 파란색인 물품의 재고가 있는지 검사한다.

__2.2.7 프래그먼트__

- 프래그먼트 컴포넌트를 통해 리소스 내의 조각을 가리킬 수 있다.
- 일반적으로 HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에, 클라이언트는 서버에 프래그먼트를 전달하지 않고 브라우저가 서버로부터 전체 리소스를 내려받은 후 프래그먼트를 사용하여 리소스의 일부를 보여준다.

## 2.3 단축 URL

__2.3.1 상대 URL__

> ./hammers.html  
- 절대 URL과 달리 상대 URL은 모든 정보를 담고 있지 않다.
- 리소스에 접근하기 위해 필요한 모든 정보를 얻기 위해서는 `기저`라고 하는 다른 URL을 사용해야 한다.
- 상대 URL을 사용하면 리소스 집합을 쉽게 변경할 수 있다.
- 문서 집합의 위치를 변경하더라도, 새로운 기저 URL에 의해 해석되므로 정상적으로 동작한다.

__2.3.2 URL 확장__

- 호스트 명 확장
  - 단순한 휴리스틱만을 사용해서 입력한 호스트 명을 전체 호스트 명으로 확장한다.
  - 주소란에 `yahoo`를 입력하면 브라우저는 자동으로 `www.`와 `.com`을 붙여 `www.yahoo.com`을 만든다.
  - 사용자의 시간을 절약하고 혼란을 막는다.
- 히스토리 확장
  - 브라우저는 과거에 사용자가 방문했던 URL의 기록을 저장한다.
  - URL을 입력하면 입력된 URL의 앞 글자들을 포함하는 완결된 형태의 URL들을 선택하게 해준다.

## 2.4 안전하지 않은 문자

- 안전한 전송이란 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미한다.
- URL은 상대적으로 작고 일반적으로 안전한 알파벳 문자만 포함하도록 허락한다.
- 사람들이 URL에 이진 데이터나 일반적으로 안전한 알파벳 외에 문자도 포함하려고 할 때가 있다는 것을 알고 이스케이프 기능을 추가하여 안전하지 않은 문자를 안전한 문자로 인코딩할 수 있게 했다.

__2.4.1 URL 문자 집합__

- 많은 애플리케이션이 7비트로 이루어진 US-ASCII 문자 집합을 사용하나, 이는 굉장히 적은 문자만 포함한다(영어).
- 뿐 아니라 URL이 특정 이진 데이터를 포함해야 하는 경우도 있으므로 설계자들은 URL에 이스케이프 문자열을 쓸 수 있도록 설계했다.

__2.4.2 인코딩 체계__

- 몇몇 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식을 고안했다.
- 안전하지 않은 문자를 퍼센티지 기호로 시작해 두개의  16진수 숫자로 이루어진 이스케이프문자로 바꾼다.
| 문자 | ASCII 코드 | URL 예 |
| --- | --- | --- |
| ~ | 126 (0x7E) | http://www.joes-hardware.com/%7Ejoe |
| 빈 문자 | 32 (0x20) | http://www.joes-hardware.com/more%20tools.html |
| % | 37 (0x25) | http://www.joes-hardware.com/100%25satisfaction.html |

__2.4.3 문자 제한__

- 몇몇 문자는 URL 내에서 특별한 의미로 사용되고, US-ASCII의 출력 가능한 문자 지밯ㅂ에 포함되어 있지 않고, 몇몇 인터넷 게이트웨이와 프로토콜에서 혼동되는 것으로 알려져 있어 사용이 꺼려지기도 한다.
- 이러한 예약된 문자들을 본래 목적이 아닌 다른 용도로 사용하려면 반드시 인코딩해야 한다.
- 예) % / . .. # ? ; : 등

__2.4.4 좀더 알아보기__

- 안전하지 않은 문자를 그대로 사용해도 문제가 발생하지 않을 순 있지만, 혼동의 여지가 있기 때문에 모두 변환해야 한다.
- 어떤 문자를 인코딩해야 하는가는 브라우저와 같이 최초로 URL을 입력받는 애플리케이션에서 하는 것이 적절하다.
- 모든 문자를 인코딩하는 방법도 있으나, 선호되지 않는다.

## 2.6 미래

- URL은 주소이지 실제 이름이 아니므로 완벽하지 않다. 리소스가 옮겨지면 더는 사용할 수 없다.
- 이상적인 방법은 그 객체를 가리키는 실제 객체의 이름을 사용하는 것이다. -> URN
- URL에서 URN으로 주소 체계를 바꾸는 것은 매우 큰 작업이다. 이러한 전환을 위해서는 굉장히 많은 시간이 걸릴 것이다.


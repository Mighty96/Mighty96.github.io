---
title: "스프링 부트와 JPA 활용1 - 4. 회원 도메인 개발"

categories:
  - Study
tags:
  - Spring Boot
  - JPA
toc: true
toc_sticky: true
---

[김영한님의 인프런 강의 - 실전! 스프링 부트와 JPA 활용1 - 웹 애플리케이션 개발](https://inf.run/xUKp)  
위 강의를 정리한 내용입니다.

# I. 회원 리포지토리 개발

- `@PersistenceContext`
  - `EntityManager`를 만들어서 주입해줌(어디에?)
  - 검색해봤는데, JPA기본강의에서 제대로 다뤄지는 것 같다.
- SQL? JPQL?
  - 문법은 조금 다르나 기능은 같다.
  - JPQL도 결국엔 SQL로 변환되어진다.
- (궁금증) Domain? Repository?

# II. 회원 서비스 개발

- (궁금증) Repository? Service?
  - `Controller` : Front End 기술에 대한 추상화를 지원한다.
    - Front End에 상관없이 Service와 Domain이 영향을 받지 않게 해준다.
  - `Domain` : Repository 기술에 대한 추상화를 지원한다.
    - 저장소가 무엇이던 Controller와 Service등이 영향을 받지 않게 해준다.
  - `Service` : 비지니스 로직을 처리한다.
  - `Repository` : DB에 직접 접근

- 회원가입로직 등은 메서드를 통해 중복검증을 시행하지만, 멀티 쓰레드 등으로 인한 중복등록에 대비해 DB에서도 유니크처리 해주는 것이 좋음

# III. 회원 기능 테스트

- `@RunWith(SpringRunner.class)` : JUnit을 스프링과 엮어서 실행하겠다.
- `@SpringBootTest` : 스프링부트를 띄운 상태로 테스트를 진행
- 테스트 진행시 `test`폴더의 `resources`폴더에 `application.yml`을 새로 만들면 기존 것보다 우선권을 갖는다. 디비를 메모리로 설정해서 테스트를 진행하자.